import{e as t,R as e,E as r,f as n,g as a,L as i}from"./p-11a0c62a.js";import{A as s}from"./p-3eddaf0f.js";var l;class u{static get engine(){return r.getInstance()}static init(t){return this.engine.init(t)}static getEngine(){return this.engine}static getCurrentTime(){return l.engine.getTimeline().currentTime}static getFitDuration(){return l.engine.getTimeline().getFitDuration()}static getFps(){return l.engine.getTimeline().fps}static play(){return l.engine.play()}static pause(){return l.engine.pause()}static seek(t){return l.engine.seek(t)}static setBackgroundColor(t){return l.engine.getDisplay().setBackgroundColor(t)}static setResolution(t,e){return l.engine.getDisplay().setResolution(t,e)}static getFonts(){return l.engine.getFontRegistry().fonts.map((t=>t.font))}static getMediaById(t){return l.engine.getLibrary().getMediaById(t)}static addMediaToGallery(t,e){return l.engine.getLibrary().addMedia(t,e)}static getClipById(t){return l.engine.getClipById(t)}static getLayerById(t){return l.engine.getTimeline().getLayerById(t)}static createLayer(t){return l.engine.getTimeline().createLayer({index:t})}static deleteLayer(t){return l.engine.getTimeline().removeLayer(t)}static async moveClipToLayer(t,e){return l.engine.getTimeline().moveClipToLayer(t,e)}static async addMediaToLayer(t,e,r=l.getCurrentTime()){const n=l.getLayerById(t);return null==n?null:n.addClip({mediaDataId:e,startTime:r})}static addTextClipToLayer(t,e="Hello World"){const r=l.getLayerById(t),n=l.getCurrentTime();return null==r?null:r.addClip({text:e,startTime:n,duration:1,style:{color:"#FFFFFF"}})}static deleteMediaById(t){return l.engine.getLibrary().deleteMedia(t)}static deleteClipById(t){return l.engine.getTimeline().removeClip(t)}static deleteTransitionById(t,e){const r=l.getLayerById(e);return null==r?void 0:r.removeTransition(t)}static deleteAtCurrentTime(){var t;const r=s.selectedClipId;if(null!=r)return l.deleteClipById(r);const n=s.selectedTransitionId;if(null!=n){const r=null===(t=e.getLayerFromTransitionId(n))||void 0===t?void 0:t.id;if(null!=r)return l.deleteTransitionById(n,r)}}static export(){return l.engine.export()}static async importSubtitlesSrt(t){const e=r.getInstance().getSubtitlesManager().convertSRTToSubtitles(t);return await l.addSubtitles(e)}static async addManualSubtitles(t){const e=new n({textBlocks:null!=t?t:[{text:"Sample",time:0,duration:1}]});return await l.addSubtitles(e)}static async addSubtitles(t){const e=r.getInstance().getLibrary().addSubtitles(t),n=l.createLayer(),i=new a({subtitlesId:e});return await n.addClip(i),i.id}static async createLottieClip(t){const e=t.layerId?l.getLayerById(t.layerId):l.createLayer();if(null==e)return null;const r=new i({dataUrl:t.dataUrl,propertiesUrl:t.propertiesUrl,startTime:t.startTime});return await e.addClip(r),r}static async createTextClip(t){const e=t.layerId?l.getLayerById(t.layerId):l.createLayer();return null==e?(console.log("cannot create layer"),null):await e.addClip({type:"text",text:t.text,startTime:t.startTime})}static async replaceMedia(t,e){return l.getEngine().getLibrary().replaceMedia(t,e)}static loadFont(t,e){return this.engine.getFontRegistry().loadFromCssUrl(t,e)}}l=u,u.splitAtCurrentTime=()=>{var r;const n=s.selectedClipId;if(null==n)return;const a=e.currentTime,i=e.clips[n];if(null==i)return;if((null==i?void 0:i.type)===t.SUBTITLES)return;const u=null===(r=Object.values(e.layers).find((t=>t.clipsIds.includes(n))))||void 0===r?void 0:r.id;if(null==u)return;const c=l.engine.getTimeline().getLayerById(u);null!=c&&c.splitClip(i.id,a)},u.moveClipLeft=()=>{var t;const r=s.selectedClipId;if(null==r)return;const n=null===(t=Object.values(e.layers).find((t=>t.clipsIds.includes(r))))||void 0===t?void 0:t.id;if(null==n)return;const a=l.engine.getTimeline().getLayerById(n);if(null!=a)for(let t=0;t<a.clipsIds.length;t++)if(a.clipsIds[t]===r){t>0?(a.clips[r].setStartTime(a.clips[a.clipsIds[t-1]].getRightBound()-a.clips[r].getLeftTrim()),e.clips[r].startTime=a.clips[r].getStartTime()):(e.clips[r].startTime=-a.clips[r].getLeftTrim(),a.clips[r].setStartTime(e.clips[r].startTime));break}};export{u as R}